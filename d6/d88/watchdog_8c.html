<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>reactor-c: core/threaded/watchdog.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">reactor-c
   </div>
   <div id="projectbrief">C Runtime for Lingua Franca</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d6/d88/watchdog_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">watchdog.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Definitions for watchdogs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da3/watchdog_8h_source.html">watchdog.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d3c/util_8h_source.html">util.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a13c2f54f700bce3d4572600bb87ab055" id="r_a13c2f54f700bce3d4572600bb87ab055"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13c2f54f700bce3d4572600bb87ab055">_lf_initialize_watchdog_mutexes</a> ()</td></tr>
<tr class="memdesc:a13c2f54f700bce3d4572600bb87ab055"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize watchdog mutexes. For any reactor with one or more watchdogs, the self struct should have a non-NULL <code>reactor_mutex</code> field which points to an instance of <code>lf_mutex_t</code>. This function initializes those mutexes.  <br /></td></tr>
<tr class="separator:a13c2f54f700bce3d4572600bb87ab055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3e110d0101fbc070e3c514cb375260" id="r_aac3e110d0101fbc070e3c514cb375260"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac3e110d0101fbc070e3c514cb375260">_lf_run_watchdog</a> (<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> *<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">arg</a>)</td></tr>
<tr class="memdesc:aac3e110d0101fbc070e3c514cb375260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread function for watchdog. This function sleeps until physical time exceeds the expiration time of the watchdog and then invokes the watchdog expiration handler function. In normal usage, the expiration time is incremented while the thread is sleeping, so the watchdog never expires and the handler function is never invoked. This function acquires the reaction mutex and releases it while sleeping.  <br /></td></tr>
<tr class="separator:aac3e110d0101fbc070e3c514cb375260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82bf2c7bd91fdf03b357914cf875dbb9" id="r_a82bf2c7bd91fdf03b357914cf875dbb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82bf2c7bd91fdf03b357914cf875dbb9">lf_watchdog_start</a> (<a class="el" href="../../d3/dc4/structwatchdog__t.html">watchdog_t</a> *<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">watchdog</a>, <a class="el" href="../../d2/dcd/tag_8h.html#af5b4e62d03782997d813be6145316f4b">interval_t</a> <a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">additional_timeout</a>)</td></tr>
<tr class="memdesc:a82bf2c7bd91fdf03b357914cf875dbb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start or restart the watchdog timer. This function sets the expiration time of the watchdog to the current logical time plus the minimum timeout of the watchdog plus the specified <code>additional_timeout</code>. If a watchdog timer thread is not already running, then this function will start one. This function assumes the reactor mutex is held when it is called; this assumption is satisfied whenever this function is called from within a reaction that declares the watchdog as an effect.  <br /></td></tr>
<tr class="separator:a82bf2c7bd91fdf03b357914cf875dbb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27ad22f94bbdaa33b99fe6cd81f1bdc" id="r_aa27ad22f94bbdaa33b99fe6cd81f1bdc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa27ad22f94bbdaa33b99fe6cd81f1bdc">lf_watchdog_stop</a> (<a class="el" href="../../d3/dc4/structwatchdog__t.html">watchdog_t</a> *<a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">watchdog</a>)</td></tr>
<tr class="memdesc:aa27ad22f94bbdaa33b99fe6cd81f1bdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the specified watchdog without invoking the expiration handler. This function sets the expiration time of the watchdog to <code>NEVER</code>.  <br /></td></tr>
<tr class="separator:aa27ad22f94bbdaa33b99fe6cd81f1bdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a880e557a82e4187d4db968b54ab5c1f6" id="r_a880e557a82e4187d4db968b54ab5c1f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a880e557a82e4187d4db968b54ab5c1f6">_lf_watchdog_count</a></td></tr>
<tr class="separator:a880e557a82e4187d4db968b54ab5c1f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa7413bd0991c342f07dd55163d6c3d" id="r_aeaa7413bd0991c342f07dd55163d6c3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/dc4/structwatchdog__t.html">watchdog_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeaa7413bd0991c342f07dd55163d6c3d">_lf_watchdogs</a></td></tr>
<tr class="separator:aeaa7413bd0991c342f07dd55163d6c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definitions for watchdogs. </p>
<dl class="section author"><dt>Author</dt><dd>Benjamin Asch </dd>
<dd>
Edward A. Lee </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2023, The University of California at Berkeley. License: <a href="https://github.com/lf-lang/reactor-c/blob/main/LICENSE.md">BSD 2-clause</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a13c2f54f700bce3d4572600bb87ab055" name="a13c2f54f700bce3d4572600bb87ab055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c2f54f700bce3d4572600bb87ab055">&#9670;&#160;</a></span>_lf_initialize_watchdog_mutexes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> _lf_initialize_watchdog_mutexes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a></td>          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize watchdog mutexes. For any reactor with one or more watchdogs, the self struct should have a non-NULL <code>reactor_mutex</code> field which points to an instance of <code>lf_mutex_t</code>. This function initializes those mutexes. </p>
<p>Function to initialize mutexes for watchdogs </p>

</div>
</div>
<a id="aac3e110d0101fbc070e3c514cb375260" name="aac3e110d0101fbc070e3c514cb375260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3e110d0101fbc070e3c514cb375260">&#9670;&#160;</a></span>_lf_run_watchdog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> * _lf_run_watchdog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> *</td>          <td class="paramname"><span class="paramname"><em>arg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread function for watchdog. This function sleeps until physical time exceeds the expiration time of the watchdog and then invokes the watchdog expiration handler function. In normal usage, the expiration time is incremented while the thread is sleeping, so the watchdog never expires and the handler function is never invoked. This function acquires the reaction mutex and releases it while sleeping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>A pointer to the watchdog struct </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>

</div>
</div>
<a id="a82bf2c7bd91fdf03b357914cf875dbb9" name="a82bf2c7bd91fdf03b357914cf875dbb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82bf2c7bd91fdf03b357914cf875dbb9">&#9670;&#160;</a></span>lf_watchdog_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> lf_watchdog_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/dc4/structwatchdog__t.html">watchdog_t</a> *</td>          <td class="paramname"><span class="paramname"><em>watchdog</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/dcd/tag_8h.html#af5b4e62d03782997d813be6145316f4b">interval_t</a></td>          <td class="paramname"><span class="paramname"><em>additional_timeout</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start or restart the watchdog timer. This function sets the expiration time of the watchdog to the current logical time plus the minimum timeout of the watchdog plus the specified <code>additional_timeout</code>. If a watchdog timer thread is not already running, then this function will start one. This function assumes the reactor mutex is held when it is called; this assumption is satisfied whenever this function is called from within a reaction that declares the watchdog as an effect. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">watchdog</td><td>The watchdog to be started </td></tr>
    <tr><td class="paramname">additional_timeout</td><td>Additional timeout to be added to the watchdog's minimum expiration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa27ad22f94bbdaa33b99fe6cd81f1bdc" name="aa27ad22f94bbdaa33b99fe6cd81f1bdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27ad22f94bbdaa33b99fe6cd81f1bdc">&#9670;&#160;</a></span>lf_watchdog_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">void</a> lf_watchdog_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/dc4/structwatchdog__t.html">watchdog_t</a> *</td>          <td class="paramname"><span class="paramname"><em>watchdog</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the specified watchdog without invoking the expiration handler. This function sets the expiration time of the watchdog to <code>NEVER</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">watchdog</td><td>The watchdog. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a880e557a82e4187d4db968b54ab5c1f6" name="a880e557a82e4187d4db968b54ab5c1f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a880e557a82e4187d4db968b54ab5c1f6">&#9670;&#160;</a></span>_lf_watchdog_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/df3/hashmap_8h.html#ad2c17ed7e0d4d65a63bf9002aba2016f">int</a> _lf_watchdog_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aeaa7413bd0991c342f07dd55163d6c3d" name="aeaa7413bd0991c342f07dd55163d6c3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaa7413bd0991c342f07dd55163d6c3d">&#9670;&#160;</a></span>_lf_watchdogs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/dc4/structwatchdog__t.html">watchdog_t</a>* _lf_watchdogs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_4270bfced15e0e73154b13468c7c9ad9.html">core</a></li><li class="navelem"><a class="el" href="../../dir_9409d006c5a5b89ee51387d0bee40656.html">threaded</a></li><li class="navelem"><a class="el" href="../../d6/d88/watchdog_8c.html">watchdog.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
